(()=>{var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const s=flarum.core.compat["forum/app"];var i=e.n(s);const o=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/DiscussionComposer"];var r=e.n(n);flarum.core.compat["common/components/Tooltip"],i().initializers.add("justoverclock/check-duplicate-discussions",(function(){(0,o.extend)(r().prototype,"oncreate",(function(){var e=i().forum.attribute("justoverclock-check-duplicate-discussions.similarNumber")||3,t=document.querySelector(".ComposerBody-editor"),s=document.querySelector("li.item-discussionTitle > h3 > input"),o=null;s.addEventListener("keyup",(function(n){var r;clearTimeout(o),o=setTimeout((function(){var o,r,c;o=n.target.value,r=i().translator.trans("justoverclock-check-duplicate-discussions.forum.title"),c=i().translator.trans("justoverclock-check-duplicate-discussions.forum.foundDiscussion"),i().store.find("discussions",{page:{limit:e},"filter[q]":o}).then((function(e){if(""!==s.value&&e.length>0){var o=document.createElement("div");o.setAttribute("class","simdisc-container"),o.setAttribute("id","sim-container"),o.innerHTML='\n                      <div>\n                         <p class="simtitle" >'+r+' </p>\n                         <p class="simtitle-desc">'+c+"</p>\n                      </div>\n            ",e.forEach((function(e){var s=document.createElement("div");s.setAttribute("id","similar-discussions"),s.setAttribute("class","similar-discussions");var n=e.data.attributes.hasBestAnswer;n=!1!==n?'<i class="fas fa-check-circle simsolved"></i> '+i().translator.trans("justoverclock-check-duplicate-discussions.forum.solvedSimilar"):"",s.innerHTML='\n                  <div class="simdisc">\n                     <li>\n                        <i class="fas fa-exclamation sim"></i>\n                        <a class="simlink" href='+i().route.discussion(e)+' rel="nofollow" title="'+e.firstPost().contentHtml().replace(/<\/?[^>]+(>|$)/g,"").substr(0,200)+'...">\n                            '+e.data.attributes.title+'\n                        </a>\n                        <span class="bestAnswer-similar" id="best-similar">'+n+"</span>\n                     </li>\n                  </div>",o.appendChild(s),t.insertAdjacentElement("beforebegin",o)}))}}))}),1e3),(r=document.getElementById("sim-container"))&&r.remove()}))}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map